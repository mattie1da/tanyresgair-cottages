import Image from "next/image";
import Review from "../review";
import Button from "../button";
import Tag from "../tag";
import styles from './styles.module.css';
import Perks from "../perks";
import Carousel from "../carousel";

const renderIcons = (persons, pets) => {
  return (
    <>
      {persons.map(person => 
        <svg title={person} width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M6.99967 6.99998C8.84134 6.99998 10.333 5.50831 10.333 3.66665C10.333 1.82498 8.84134 0.333313 6.99967 0.333313C5.15801 0.333313 3.66634 1.82498 3.66634 3.66665C3.66634 5.50831 5.15801 6.99998 6.99967 6.99998ZM6.99967 8.66665C4.77467 8.66665 0.333008 9.78331 0.333008 12V13.6666H13.6663V12C13.6663 9.78331 9.22468 8.66665 6.99967 8.66665Z" fill="#002F2F" fillOpacity="0.77"/>
        </svg>
      )}
  
      {pets.map(pet => 
        <svg title={pet} width="15" height="13" viewBox="0 0 15 13" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M14.9375 5.17188C14.9375 5.53963 14.8285 5.89912 14.6241 6.20489C14.4198 6.51066 14.1294 6.74898 13.7897 6.88971C13.4499 7.03045 13.0761 7.06727 12.7154 6.99552C12.3547 6.92378 12.0234 6.74669 11.7634 6.48665C11.5033 6.22661 11.3262 5.89531 11.2545 5.53462C11.1827 5.17394 11.2196 4.80008 11.3603 4.46032C11.501 4.12057 11.7393 3.83017 12.0451 3.62586C12.3509 3.42155 12.7104 3.3125 13.0781 3.3125C13.5713 3.3125 14.0442 3.5084 14.3929 3.8571C14.7416 4.2058 14.9375 4.67874 14.9375 5.17188ZM3.78125 5.17188C3.78125 4.80413 3.6722 4.44463 3.46789 4.13886C3.26358 3.83309 2.97318 3.59477 2.63343 3.45404C2.29367 3.31331 1.91981 3.27648 1.55913 3.34823C1.19845 3.41997 0.867138 3.59706 0.607099 3.8571C0.347061 4.11714 0.169973 4.44845 0.0982282 4.80913C0.0264838 5.16981 0.0633056 5.54367 0.204037 5.88343C0.344769 6.22318 0.58309 6.51358 0.888863 6.71789C1.19464 6.9222 1.55413 7.03125 1.92188 7.03125C2.41501 7.03125 2.88795 6.83535 3.23665 6.48665C3.58535 6.13795 3.78125 5.66501 3.78125 5.17188ZM5.10938 3.84375C5.47713 3.84375 5.83662 3.7347 6.14239 3.53039C6.44816 3.32608 6.68648 3.03568 6.82722 2.69593C6.96795 2.35617 7.00477 1.98231 6.93302 1.62163C6.86128 1.26095 6.68419 0.929637 6.42415 0.669599C6.16411 0.409561 5.83281 0.232473 5.47212 0.160728C5.11144 0.0889838 4.73758 0.125806 4.39782 0.266537C4.05807 0.407269 3.76767 0.64559 3.56336 0.951362C3.35905 1.25714 3.25 1.61663 3.25 1.98438C3.25 2.47751 3.4459 2.95045 3.7946 3.29915C4.1433 3.64785 4.61624 3.84375 5.10938 3.84375ZM9.89063 3.84375C10.2584 3.84375 10.6179 3.7347 10.9236 3.53039C11.2294 3.32608 11.4677 3.03568 11.6085 2.69593C11.7492 2.35617 11.786 1.98231 11.7143 1.62163C11.6425 1.26095 11.4654 0.929637 11.2054 0.669599C10.9454 0.409561 10.6141 0.232473 10.2534 0.160728C9.89269 0.0889838 9.51883 0.125806 9.17908 0.266537C8.83932 0.407269 8.54892 0.64559 8.34461 0.951362C8.1403 1.25714 8.03125 1.61663 8.03125 1.98438C8.03125 2.47751 8.22715 2.95045 8.57585 3.29915C8.92455 3.64785 9.39749 3.84375 9.89063 3.84375ZM11.4259 7.88523C11.1561 7.73637 10.9183 7.53575 10.726 7.29487C10.5338 7.05398 10.391 6.77756 10.3057 6.48141C10.129 5.87395 9.76001 5.34024 9.25408 4.96046C8.74814 4.58069 8.13262 4.37538 7.5 4.37538C6.86739 4.37538 6.25186 4.58069 5.74593 4.96046C5.23999 5.34024 4.87098 5.87395 4.69434 6.48141C4.52371 7.07731 4.12369 7.58121 3.58203 7.88258C3.06242 8.16374 2.65137 8.61012 2.4139 9.1511C2.17643 9.69208 2.12609 10.2968 2.27086 10.8696C2.41562 11.4424 2.74721 11.9506 3.21319 12.3138C3.67917 12.677 4.25294 12.8745 4.84375 12.875C5.1978 12.876 5.54839 12.8053 5.87438 12.6671C6.91368 12.2385 8.08035 12.2385 9.11965 12.6671C9.74915 12.9409 10.4602 12.9604 11.1037 12.7214C11.7472 12.4824 12.2733 12.0036 12.5715 11.3853C12.8697 10.767 12.917 10.0573 12.7035 9.40491C12.4899 8.75252 12.0321 8.20814 11.4259 7.8859V7.88523Z" fill="#355D5E"/>
        </svg>
      )}
    </>
  )
}

export default function Cottage({
  highlight,
  persons,
  pets,
  name,
  images,
  review,
  perks,
  description,
  url
}) {
    return (
      <div className={styles.wrapper}>
        <div className={styles.header}>
          <div className={styles.tags}>
            <Tag name={highlight} type="success" />
            <Tag name={renderIcons(persons, pets)} type="info" />
          </div>
          <div className={styles.meta}>
            <h2>{ name }</h2>
            <div className={styles.actions}>
              <a href={url}>Find out more &rarr;</a>
              {/* <Button primary /> */}
            </div>
          </div>
        </div>
        <div className={styles.images}>
          { images.slice(0, 4).map((image, index) => (
            <div className={styles.imageWrapper}>
              <Image
                className={styles.image}
                src={ image }
                alt="Next.js Logo"
                width={180}
                height={37}
                priority
              />
              { index === 0 && <Review quote={review.quote} name={review.name} /> }
              { index === 3 && <Carousel count={images.length} /> }
            </div>
            )
          )}
        </div>
        <Perks perks={perks} />
        <p className={styles.description}>{ description }</p>
        <div className={styles.footer}>
          <a href={url}>Find out more &rarr;</a>
          <Button primary />
        </div>
      </div>
    )
}
